(function(f){var c=function(h){return typeof h==="undefined"};var e=function(h){return h===null};var d=function(h){return !c(h)&&!e(h)};var a=function(h){return c(h)||e(h)||h===""};var g=function(h,j){if(d(j)){var i=f('<div class="dialog-buttons"></div>');f.each(j,function(l,k){f('<div class="button button-normal"></div>').text(k.buttonText).click(function(){var m=f(this).data("handler");if(d(m)&&typeof m.click==="function"){m.click.call(h)}}).data("handler",k.handler).appendTo(i)});i.append('<div class="clear"></div>').appendTo(h)}};var b={init:function(h){return this.each(function(){if(d(h)){var k=f(this).addClass("dialog cancellable modal");var i=f('<span class="dialog-header-text"></span>');var j=f('<div class="dialog-header"></div>').append(i);if(d(h.handler)){k.data("handler",h.handler)}if(!a(h.headerText)){i.text(h.headerText)}k.prepend(j);if(h.overlayBackground===true){k.addClass("overlay")}else{k.addClass("show-border")}g(k,h.buttons)}})},setHandler:function(h){return this.each(function(){f(this).data("handler",h)})},setOverlayBackground:function(h){return this.each(function(){if(d(h)){var i=f(this);if(h===true){i.addClass("overlay");i.removeClass("show-border")}else{i.addClass("show-border");i.removeClass("overlay")}}})},setButtonModel:function(h){return this.each(function(){if(d(h)){var i=f(this);i.children(".dialog-buttons").remove();g(i,h)}})},setHeaderText:function(h){return this.each(function(){f(this).find("span.dialog-header-text").text(h)})},show:function(){return this.each(function(){var h=f(this);if(!h.is(":visible")){var i=h.find("span.dialog-header-text").text();if(a(i)){h.find(".dialog-content").css("margin-top","-20px")}else{h.find(".dialog-content").css("margin-top","0")}if(h.hasClass("show-border")){f("#glass-pane").show()}else{f("#faded-background").show()}h.center().show()}})},hide:function(){return this.each(function(){var h=f(this);if(h.is(":visible")){if(h.hasClass("show-border")){f("#glass-pane").hide()}else{f("#faded-background").hide()}h.hide();var i=h.data("handler");if(d(i)&&typeof i.close==="function"){i.close.call(h)}}})}};f.fn.modal=function(h){if(b[h]){return b[h].apply(this,Array.prototype.slice.call(arguments,1))}else{return b.init.apply(this,arguments)}}})(jQuery);