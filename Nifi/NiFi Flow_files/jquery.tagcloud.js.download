(function(h){var d=function(i){return typeof i==="undefined"};var g=function(i){return i===null};var f=function(i){return !d(i)&&!g(i)};var a=function(i){return d(i)||g(i)||i===""};var e={maxTags:25,maxTagFontSize:2,minTagFontSize:1,minWidth:20};var c=function(n,i){var m=n.data("options");var k=n.find("ul.tag-filter");var p=false;k.find("li div.selected-tag-text").each(function(){if(i===h(this).text()){p=true;return false}});if(!p){var o=h('<div class="selected-tag-text"></div>').text(i);var j=h('<img src="images/iconDelete.png" class="remove-selected-tag pointer"></img>').click(function(){h(this).closest("li").remove();if(f(m.remove)){m.remove.call(n,i)}});var l=h("<div></div>").append(o).append(j);h("<li></li>").append(l).appendTo(k);if(f(m.select)){m.select.call(n,i)}}};var b={init:function(i){return this.each(function(){if(f(i)&&f(i.tags)){var l=h(this);l.empty().unbind().data("options",i);var k=h('<ul class="tag-cloud"></ul>').appendTo(l);h('<div class="tag-cloud-separator">').appendTo(l);var m=h('<ul class="tag-filter"></ul>').appendTo(l);var n={};var j=[];h.each(i.tags,function(r,p){var s=p.toLowerCase();if(nf.Common.isDefinedAndNotNull(n[s])){n[s].count=n[s].count+1}else{var q={term:s,count:1};j.push(q);n[s]=q}});if(j.length>0){j.sort(function(q,p){return p.count-q.count});if(j.length>e.maxTags){j=j.slice(0,e.maxTags)}var o=j[0].count;j.sort(function(q,p){var s=q.term.toUpperCase();var r=p.term.toUpperCase();return(s<r)?-1:(s>r)?1:0});h.each(j,function(q,p){var s=Math.log(p.count)/Math.log(o)*(e.maxTagFontSize-e.minTagFontSize)+e.minTagFontSize;var r=e.minWidth*s;h("<li></li>").append(h('<span class="link"></span>').text(p.term).css({"font-size":s+"em"})).css({"min-width":r+"px"}).click(function(){if(m.children("li").length<5){var t=h(this).children("span").text();c(l,t)}}).appendTo(k).ellipsis()})}else{h('<li><span class="unset">No tags specified</span></li>').appendTo(k)}}})},clearSelectedTags:function(){return this.each(function(){var i=h(this);i.find("img.remove-selected-tag").trigger("click")})},getSelectedTags:function(){var i=[];this.each(function(){var j=h(this);j.find("div.selected-tag-text").each(function(){i.push(h(this).text())})});return i}};h.fn.tagcloud=function(i){if(b[i]){return b[i].apply(this,Array.prototype.slice.call(arguments,1))}else{return b.init.apply(this,arguments)}}})(jQuery);